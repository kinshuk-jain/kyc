### Production Requirements
- Python 3.7+
- Python server behind nginx (provides a lot of features like SSL termination, compression, rate limiting, HTTP/2.0 etc that we do not need to implement ourselves)
- Linux kernel version 4.5+

### Setup project(Manual)

Note: Recommended way to setup the project is to run `./setup.sh <development|production>` from project root. This guide explains what to do
if the script doesnt work.

- This project requires pipenv and direnv to manage packages and virtual environments.

- Pipenv builds on top of pip and venv to manage packages and virtual environments. It can be installed as
  `pip install pipenv`

- direnv is used to load environment variables into the shell on the fly depending on directory.
  If you change directory different environment variables will be made available to the shell.
  direnv is only needed for development environment. By default direnv is already installed on most systems.
  Check using `direnv --version`. If not installed, see - https://direnv.net/docs/installation.html

- Hook your direnv. Without this it will not work. See - https://direnv.net/docs/hook.html

- Once you hook it, you need to restart the shell. direnv might not have permissions to read your `.envrc` file
  and you will need to allow direnv by `direnv allow .`. Make sure you are in root of this project while doing so

- Start a virtual environment by `pipenv shell`. Now you can install dependencies or run project using pipenv

- Install all dependencies as - `pipenv install --dev`. This will install both dev and non dev dependencies. __DO NOT__
  run this command in production. In production we need to run `pipenv install --ignore-pipfile`. This will install
  all dependencies from lock file and not from pipfile generated by pipenv.


### Run project

- If running for the first time, run `./setup.sh <development|production>` in your shell from project root directory.
- Start the virtual environment: `pipenv shell`
- Run: `pipenv run python3 main.py`


### Testing

Tests are written using pytest. They can be run using `pytest`. These will run all the tests.
All other options offered by pytest apply. Run individual test using `pytest -k 'test_name'`.
Run a specific marker test using `pytest -m 'marker_name'`. For more see - https://docs.pytest.org/en/stable/reference.html#command-line-flags

When you write unit/integration tests, test only the behavior of the system under test. Do not test
implementation details. Do not test, what a function returns, what parameters it expects, whether it's
variables or class properties have desired values. Test whether the system behaves as it should.


### Installing dependencies 

- To install dev dependency - `pipenv install <dependency> --dev`
- To install a non-dev dependency - `pipenv install <dependency>`
